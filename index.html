<!DOCTYPE html>
  <head>
    <title>bronen.github.io</title>
    <style>
      body{
        padding: 5px;
        background-color: #101010;
      }
      *{
        box-sizing: border-box;
      }
      #root{
        padding: 20px;
        background-color: #333;
        border: 2px solid #222;
        border-radius: 10px;
        display: grid;
        grid-gap: 10px 10px;
        justify-content: center;
        align-content: center;
        grid-template-areas:
        'profile_img       buttons buttons buttons buttons buttons buttons buttons buttons buttons'
        'repositories repositories posts   posts   posts   posts   posts   posts   posts   posts  ';
      }
      header{
        padding-left: 10px;
        height: 100%;
        width: 100%;
      }
      #profile_img{
        grid-area: profile_img;
        height: 100%;
        border-radius: 100%;
        border:2px solid #aaa;
      }
      #profile_img:hover {
        box-shadow: 0 0 2px 1px rgba(0, 140, 186, 0.5);
        filter: grayscale(50%);
      }
      #buttons_container{
        grid-area: buttons;
        display: flex;
        flex-direction: row;
        overflow-x: auto;
        scroll:hidden;
        border-radius: 50px;
      }
      .Default-button{
        padding: 15px;
        cursor: pointer;
        width: auto;
        height: auto;
        border-radius:4px;
        box-shadow: 1px 1px 2px #666;
        border:1px solid #aaa;
        background: #222;
        color: #5b5;
      }
      .Default-button h1{
        font-size: 200%;
      }
      #repositories{
        grid-area: repositories;
        width: 100%;
        max-height: 30vh;
        background-color: #ddd;
        display: flex;
        flex-direction: column;
        overflow-y: auto;
        scroll:hidden;
        border-radius: 10px;
      }
      #teste{
        grid-area: img;
      }
      #posts{
        width: 100%;
      }
      h1{
        background-color: #444;
        color: #5b5;
      }
    </style>
    <script>

      const State = {};

      State.Profile = {};

      State.Profile.User = {};
      State.Profile.setUser = function(newUser){
        State.Profile.User = newUser;
        console.log("Defined User");
      };

      State.Profile.Repos = {};
      State.Profile.setRepos = function(newRepos){
        State.Profile.Repos = newRepos;
        console.log("Defined Repos");
      };

      State.posts = [];

      window.addEventListener('load', init);

      function init(){
        axios.get('https://api.github.com/users/BRonen', {
          headers: {
            'content-type': 'application/json'
          }
        } ).then(response => {
          const User = response.data;
          console.log(User);
          State.Profile.setUser(User);

          axios.get(User.repos_url, {
            headers: {
              'content-type': 'application/json'
            }
          } ).then(response => {
            const Repos = response.data;
            console.log(Repos);
            State.Profile.setRepos(Repos);

            setupDom();
          });
        });
      }

      function setupDom(){
        document.getElementById('profile_img').src = State.Profile.User.avatar_url;

        let tmpHTML = '';
        State.Profile.Repos.map(repo => {
          tmpHTML += '<a href="'+repo.html_url+'"><button class="Default-button"><h1>'+repo.name+'</h1><p>'+repo.owner.login+'</p></button></a>\n';
        });
        document.getElementById('repositories').innerHTML = tmpHTML;

        document.getElementById('buttons_container').innerHTML = '<h1>askdjaosdfhjshdkjfhsdjkfhjksdhfksdjkhfkjhdsjkfhsdkjfh</h1>';

        axios.get('https://api.github.com/repos/BRonen/bronen.github.io/issues?per_page=10', {
          headers: {
            'content-type': 'application/json'
          }
        } ).then(response => {
          console.log(response)
          response.data.map(post => {
            let tmpHTML = ''
            console.log(post)
            tmpHTML += '<a href="/post.html?post='+post.number+'"><button class="Default-button">'+post.title+'</button></a>';
            document.getElementById('posts').innerHTML = tmpHTML;
          });
        });
      }

    </script>
  </head>
  <body>
    <div id="root">
      <img id="profile_img" src=""/>
      <div id="buttons_container"></div>
      <aside id="repositories">
      </aside>
      <div id="posts">
        asdasdasdasdasd
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </body>
</html>
